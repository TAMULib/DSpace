<?xml version="1.0"?>
<!--
  sitemap.xmap

  Version: $Revision: 1.1 $
 
  Date: $Date: 2006/05/25 16:03:31 $
 
-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
<!-- bringthisback
	<map:components>
		<map:transformers>
			<map:transformer name="restrictedItemsInfo" src="org.tamu.dspace.extensions.RestrictedItemsTransformer"/>	    
		</map:transformers>
		<map:actions>
			<map:action name="recordContext" src="org.tamu.dspace.extensions.RecordContextAction"/>
		</map:actions>
	</map:components>
-->
	<map:pipelines>
		<map:component-configurations>
			<global-variables>
				<theme-path>TAMU</theme-path>
				<theme-name>The official TAMU theme Image Gallery</theme-name>
			</global-variables>
		</map:component-configurations>
		
		<map:pipeline>

			<!-- Deliver static theme content -->
			<map:match pattern="themes/*/ImageGallery/**">
				<map:read src="{2}"/>
			</map:match>
			
		    <!-- Generate DSpace content pages -->
			<map:match pattern="**">
				
			    <!-- Step 0.1:  generate interrupt request to preserve context when users navigate to login page -->
<!-- bringthisback			    <map:act type="recordContext"/> -->
			    
			    <!-- Step 1: Generate the DRI page -->
			    <map:generate type="file" src="cocoon://DRI/{1}"/>
			    
			    <!-- Step 1.5: Gather info on restricted bitstreams -->
<!-- bringthisback
			    <map:match pattern="handle/*/*">
			        <map:transform type="restrictedItemsInfo"/>
			    </map:match>
-->				
				<!-- Deliver different CSS files to different browsers  -->
				<map:transform type="IncludePageMeta">
					<map:parameter name="stylesheet.screen#1" value="lib/css/reset.css"/>
					<map:parameter name="stylesheet.screen#2" value="lib/css/style.css"/>
					<map:parameter name="stylesheet.screen#3" value="ImageGallery/lib/css/lightbox.css"/> 
					<map:parameter name="stylesheet.screen#4" value="ImageGallery/ImageGallery.css"/>
					<map:parameter name="javascript#1" value="loadJQuery.js"/>
						<map:parameter name="javascript#2" value="lib/jquery-ui.1.8.6.min.js"/>
					<map:parameter name="javascript#3" value="lib/tamu-menus.js"/>
					<map:parameter name="javascript#4" value="ImageGallery/ImageGallery.js"/>
					<map:parameter name="theme.path" value="{global:theme-path}"/>
					<map:parameter name="theme.name" value="{global:theme-name}"/>
				    <map:parameter name="theme.image-server" value="https://djatoka.library.tamu.edu/"/>
				</map:transform>
				
				<!-- Deliver the DRI when requested  -->
    			<map:match type="request" pattern="XML">
    			  <map:serialize type="xml"/>
    			</map:match>
    			
    			<!-- Here's the call to the main stylesheet -->
    			<map:transform src="ImageGallery.xsl"/>
    			
    			<!-- Localization stuff... -->
    			<map:act type="locale">
					<map:transform type="i18n">
						<map:parameter name="locale" value="{locale}"/>						
					</map:transform>
				</map:act>
				
				<!-- The default serialization method -->
				<map:serialize type="html"/>
				
			</map:match>
			
		</map:pipeline>
	</map:pipelines>
</map:sitemap>