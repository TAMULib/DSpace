<?xml version="1.0"?>
<!--
  sitemap.xmap

  Version: $Revision: 1.1 $
 
  Date: $Date: 2009/10/04 16:06:31 $
 
-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
	<map:components>
<!-- bringthisback
		<map:transformers>
			<map:transformer name="restrictedItemsInfo" src="org.tamu.dspace.extensions.RestrictedItemsTransformer"/>	    
		</map:transformers>
		<map:actions>
			<map:action name="recordContext" src="org.tamu.dspace.extensions.RecordContextAction"/>
		</map:actions>
-->
	</map:components>
	<map:pipelines>
		<map:component-configurations>
			<global-variables>
				<theme-path>TAMU</theme-path>
				<theme-name>Bush School Capstones special theme</theme-name>
			</global-variables>
		</map:component-configurations>
		<map:pipeline>

			<!-- Deliver static theme content -->
			<map:match pattern="themes/*/Capstones/**">
				<map:read src="{2}"/>
			</map:match>
			
		    <!-- Deliver diffrent CSS files to diffrent browsers -->
			<map:match pattern="**">
				
			    <!-- Step 0.1:  generate interrupt request to preserve context when users navigate to login page -->
<!-- bringthisback
			    <map:act type="recordContext"/>
-->			    
			    <!-- Step 1: Generate the DRI page -->
			    <map:generate type="file" src="cocoon://DRI/{1}"/>
			    
			    <!-- Step 1.5: Gather info on restricted bitstreams -->
<!-- bringthisback
			    <map:match pattern="handle/*/*">
			        <map:transform type="restrictedItemsInfo"/>
			    </map:match>
-->				
				<!-- Step 2 Add page metadata -->
				<map:transform type="IncludePageMeta">
					<map:parameter name="stylesheet.screen#1" value="lib/css/reset.css"/>
					<map:parameter name="stylesheet.screen#2" value="lib/css/style.css"/>
					<map:parameter name="stylesheet.screen#3" value="Capstones/lib/css/style.css"/>
					<map:parameter name="javascript#1" value="loadJQuery.js"/>
	    	    	<map:parameter name="javascript#2" value="lib/jquery-ui.1.8.6.min.js"/>
    	    	  	<map:parameter name="javascript#3" value="lib/tamu-menus.js"/>							
					<map:parameter name="theme.path" value="{global:theme-path}"/>
					<map:parameter name="theme.name" value="{global:theme-name}"/>
				</map:transform>
				
				<map:match type="request" pattern="XML">
					<map:serialize type="xml"/>
				</map:match>
				
				<map:transform src="capstones.xsl"/>
				
				<map:act type="locale">
					<map:transform type="i18n">
						<map:parameter name="locale" value="{locale}"/>						
					</map:transform>
				</map:act>
				
				<!-- <map:transform type="stylesheet" src="themes/dri2xhtml.xsl"/> -->
				<map:serialize type="html"/>
			</map:match>
		</map:pipeline>
	</map:pipelines>
</map:sitemap>