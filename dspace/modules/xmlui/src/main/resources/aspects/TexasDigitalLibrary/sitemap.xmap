<?xml version="1.0"?>
<!--
  sitemap.xmap
-->

<!-- 

This Aspect is an example of a local modification to DSpace. Specificaly 
this Aspects adds a filter search to a special collection. 

-->
<map:sitemap xmlns:map="http://apache.org/cocoon/sitemap/1.0">
	<map:components>
				
		<map:transformers>  
			<map:transformer name="FilterSearch" src="org.tdl.dspace.filtersearch.FilterSearch"/>
			<map:transformer name="ExpandingCollapsingBrowser" src="org.tdl.dspace.communityview.ExpandingCollapsingBrowser"/>
		</map:transformers>

		
		<map:matchers default="wildcard">
			<map:matcher name="HandleTypeMatcher" src="org.dspace.app.xmlui.aspect.general.HandleTypeMatcher"/>
		</map:matchers>
		
	</map:components>
	
	<map:pipelines>
		<map:pipeline>
			<map:generate/>
						
			<map:match type="HandleTypeMatcher" pattern="community,collection">
			
				<!-- Collection or Community view -->
				<map:match pattern="handle/*/*">
					<map:transform type="FilterSearch"/>
				</map:match>
				
				<!-- Results page -->
				<map:match pattern="handle/*/*/filter-search">
					<map:transform type="FilterSearch">
						<map:parameter name="results" value="true"/>
					</map:transform>
				</map:match>
				
			</map:match>
			
			
			<map:match type="HandleTypeMatcher" pattern="community">
				<!-- Community view -->
				<map:match pattern="handle/*/*">
					<map:transform type="ExpandingCollapsingBrowser"/>
				</map:match>
			</map:match>
			
			
			<!-- Not a URL we care about, so just pass it on. -->
			<map:serialize type="xml"/>
			
		</map:pipeline>
	</map:pipelines>
</map:sitemap>
